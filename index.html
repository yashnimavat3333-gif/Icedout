<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
  
  <!-- Facebook in-app browser optimizations -->
  <meta property="fb:app_id" content="">
  <meta name="format-detection" content="telephone=no">
  <meta name="mobile-web-app-capable" content="yes">

  <!-- Primary Meta Tags -->
  <title>Iceyout | Premium Luxury Watches & Timepieces</title>
  <meta name="description"
    content="Discover exquisite premium watches from Iceyout. Luxury timepieces crafted with precision, featuring Swiss movements, premium materials, and timeless design.">
  <meta name="keywords"
    content="luxury watches, premium watches, Swiss watches, automatic watches, dress watches, dive watches, luxury timepieces, mens watches, womens watches">
  <meta name="author" content="Iceyout">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://iceyout.com/">
  <meta property="og:title" content="Iceyout | Premium Luxury Watches & Timepieces">
  <meta property="og:description"
    content="Discover exquisite premium watches from Iceyout. Luxury timepieces crafted with precision, featuring Swiss movements, premium materials, and timeless design.">
  <meta property="og:image" content="https://iceyout.com/images/og-image.jpg">
  <meta property="og:image:secure_url" content="https://iceyout.com/images/og-image.jpg">
  <meta property="og:image:alt" content="Iceyout Luxury Watch Collection">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:type" content="image/jpeg">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://iceyout.com/">
  <meta property="twitter:title" content="Iceyout | Premium Luxury Watches & Timepieces">
  <meta property="twitter:description"
    content="Discover exquisite premium watches from Iceyout. Luxury timepieces crafted with precision, featuring Swiss movements, premium materials, and timeless design.">
  <meta property="twitter:image" content="https://iceyout.com/images/twitter-image.jpg">

  <!-- Additional SEO Meta Tags -->
  <meta name="robots" content="index, follow, max-image-preview:large">
  <meta name="theme-color" content="#000000">
  <link rel="canonical" href="https://iceyout.com/">

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LuxuryGoodsStore",
    "name": "Iceyout",
    "description": "Premium luxury watches and timepieces",
    "url": "https://iceyout.com",
    "logo": "https://iceyout.com/logo.svg",
    "priceRange": "$$$",
    "address": {
      "@type": "PostalAddress",
      "addressCountry": "Switzerland"
    },
    "sameAs": [
      "https://www.instagram.com/iceyout",
      "https://www.facebook.com/iceyout",
      "https://twitter.com/iceyout"
    ]
  }
  </script>

  <!-- Favicon & App Icons -->
  <link rel="icon" type="image/svg+xml" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">

  <!-- Preconnect for critical domains -->
  <link rel="preconnect" href="https://www.googletagmanager.com">
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://fra.cloud.appwrite.io">
  <link rel="dns-prefetch" href="https://www.googletagmanager.com">
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  
  <!-- Preload critical hero image to prevent CLS -->
  

  <!-- Global error handler for Facebook in-app browser compatibility -->
  <script>
    // Fix for Facebook in-app browser: Prevent webkit.messageHandlers errors
    // This error occurs when scripts try to access iOS-specific APIs that don't exist in web views
    (function() {
      if (typeof window === 'undefined') return;
      
      // Detect Facebook in-app browser
      var isFacebookBrowser = /FBAN|FBAV|FB_IAB|FB4A/i.test(navigator.userAgent || '');
      
      // Create safe webkit object if it doesn't exist (prevents "undefined is not an object" errors)
      if (!window.webkit) {
        window.webkit = {};
      }
      if (!window.webkit.messageHandlers) {
        window.webkit.messageHandlers = {};
      }
      
      // Add safe handler stubs to prevent errors when code tries to call them
      if (isFacebookBrowser) {
        // Create a safe postMessage stub that does nothing
        var safeHandler = {
          postMessage: function() {
            // Silently do nothing - this prevents errors in Facebook browser
            return;
          }
        };
        
        // Add common handler names that might be accessed
        ['bridge', 'native', 'app', 'webview'].forEach(function(name) {
          if (!window.webkit.messageHandlers[name]) {
            window.webkit.messageHandlers[name] = safeHandler;
          }
        });
      }
      
      // Global error handler to catch and suppress webkit.messageHandlers errors
      window.addEventListener('error', function(e) {
        var errorMessage = e.message || (e.error && e.error.message) || '';
        if (errorMessage.includes('webkit.messageHandlers') || 
            errorMessage.includes('messageHandlers') ||
            (e.filename && e.filename.includes('webkit'))) {
          e.preventDefault();
          e.stopPropagation();
          // Don't log to console in production to avoid noise
          if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
            console.warn('Suppressed webkit.messageHandlers error (Facebook browser compatibility)');
          }
          return false;
        }
      }, true);
      
      // Also catch unhandled promise rejections
      window.addEventListener('unhandledrejection', function(e) {
        var errorMessage = '';
        if (e.reason) {
          if (typeof e.reason === 'string') {
            errorMessage = e.reason;
          } else if (typeof e.reason === 'object' && e.reason.message) {
            errorMessage = e.reason.message;
          }
        }
        if (errorMessage.includes('webkit.messageHandlers') || 
            errorMessage.includes('messageHandlers')) {
          e.preventDefault();
          e.stopPropagation();
          return false;
        }
      });
    })();
  </script>

  <!-- Defer non-critical scripts to prevent render blocking -->
  <script>
    // Guard against undefined errors in in-app browsers
    if (typeof window !== 'undefined' && typeof document !== 'undefined') {
      // Load Google Analytics after first interaction or 5 seconds
      function loadAnalytics() {
        try {
          const script = document.createElement('script');
          script.async = true;
          script.defer = true;
          script.src = 'https://www.googletagmanager.com/gtag/js?id=G-X03NVF8TXL';
          
          script.onload = function() {
            try {
              if (typeof window !== 'undefined') {
                window.dataLayer = window.dataLayer || [];
                function gtag() { 
                  if (window.dataLayer) {
                    window.dataLayer.push(arguments); 
                  }
                }
                window.gtag = gtag;
                gtag('js', new Date());
                gtag('config', 'G-X03NVF8TXL', { send_page_view: false });
              }
            } catch (e) {
              // Silently fail
            }
          };
          
          if (document.head) {
            document.head.appendChild(script);
          }
        } catch (e) {
          // Silently fail
        }
      }
      
      // Load after first interaction or 5 seconds
      var analyticsLoaded = false;
      var loadAnalyticsOnce = function() {
        if (!analyticsLoaded) {
          analyticsLoaded = true;
          loadAnalytics();
        }
      };
      
      ['click', 'touchstart', 'scroll'].forEach(function(evt) {
        document.addEventListener(evt, loadAnalyticsOnce, { passive: true, once: true });
      });
      
      setTimeout(function() {
        if (!analyticsLoaded) {
          loadAnalyticsOnce();
        }
      }, 5000);
    }
  </script>

  <!-- EmailJS - Load after first interaction (non-critical) -->
  <script>
    if (typeof window !== 'undefined' && typeof document !== 'undefined') {
      function loadEmailJS() {
        try {
          const emailScript = document.createElement('script');
          emailScript.type = 'text/javascript';
          emailScript.src = 'https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js';
          emailScript.async = true;
          emailScript.defer = true;
          emailScript.onload = function() {
            try {
              if (typeof window !== 'undefined' && window.emailjs) {
                emailjs.init({
                  publicKey: "6CgXUh7CTnIOoZsLT",
                });
              }
            } catch (e) {
              // Silently fail
            }
          };
          if (document.head) {
            document.head.appendChild(emailScript);
          }
        } catch (e) {
          // Silently fail
        }
      }
      
      // Load after first interaction or 5 seconds
      var emailJSLoaded = false;
      var loadEmailJSOnce = function() {
        if (!emailJSLoaded) {
          emailJSLoaded = true;
          loadEmailJS();
        }
      };
      
      ['click', 'touchstart'].forEach(function(evt) {
        document.addEventListener(evt, loadEmailJSOnce, { passive: true, once: true });
      });
      
      setTimeout(function() {
        if (!emailJSLoaded) {
          loadEmailJSOnce();
        }
      }, 5000);
    }
  </script>

  <!-- DebugBear RUM - Real User Monitoring (async, non-blocking) -->
  <!-- Loads immediately but async, does not block initial render or hero image -->
  <script>
    (function(){var dbpr=100;if(Math.random()*100>100-dbpr){var d="dbbRum",w=window,o=document,a=addEventListener,scr=o.createElement("script");scr.async=!0;w[d]=w[d]||[];w[d].push(["presampling",dbpr]);["error","unhandledrejection"].forEach(function(t){a(t,function(e){w[d].push([t,e])});});scr.src="https://cdn.debugbear.com/mGylJjrwEf9j.js";o.head.appendChild(scr);}})()
  </script>

  <!-- Hotjar - User behavior analytics (production only) -->
  <!-- TODO: Replace YOUR_HOTJAR_SITE_ID with your actual Hotjar Site ID (numeric, e.g., 1234567) -->
  <!-- To remove Hotjar later, delete this entire script block (lines 139-152) -->
  <script>
    (function() {
      // Only load Hotjar in production (not during development, localhost, or tests)
      var isProduction = typeof window !== 'undefined' && 
        window.location.hostname !== 'localhost' && 
        window.location.hostname !== '127.0.0.1' &&
        !window.location.hostname.includes('localhost') &&
        window.location.protocol === 'https:';
      
      if (isProduction) {
        // IMPORTANT: Replace 0 with your actual Hotjar Site ID (numeric, e.g., 1234567)
        // The provided script appears to be ContentSquare - please provide your Hotjar Site ID instead
        var HOTJAR_SITE_ID = 0; // TODO: Replace 0 with your Hotjar Site ID from https://insights.hotjar.com/settings/sites
        if (HOTJAR_SITE_ID && HOTJAR_SITE_ID !== 0 && typeof HOTJAR_SITE_ID === 'number') {
          (function(h,o,t,j,a,r){
            h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
            h._hjSettings={hjid:HOTJAR_SITE_ID,hjsv:6};
            a=o.getElementsByTagName('head')[0];
            r=o.createElement('script');r.async=1;
            r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
            a.appendChild(r);
          })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
        }
      }
    })();
  </script>
</head>

<body>
  <div id="root"></div>
  <script type="module" src="/src/main.jsx"></script>

  <!-- Progressive enhancement for SEO -->
  <noscript>
    <div
      style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 9999; padding: 20px;">
      <h1>Iceyout Premium Watches</h1>
      <p>For the best experience, please enable JavaScript. In the meantime, you can:</p>
      <ul>
        <li><a href="/collections">View our watch collections</a></li>
        <li><a href="/about">Learn about Iceyout craftsmanship</a></li>
        <li><a href="/contact">Contact our concierge service</a></li>
      </ul>
      <p>Or call us at: +1-800-ICEOUT</p>
    </div>
  </noscript>
</body>

</html>